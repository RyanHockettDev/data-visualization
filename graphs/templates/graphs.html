<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Page Title</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>  
</head>
<body style="display: flex;justify-content:center;">
    <div style="display: flex;justify-content:center;position: relative; height:80vh; width:80vw">
        <canvas id="myChart"></canvas>
    </div>
</body>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script id="my-data" type="application/json">
    {{ json_data | safe }}
</script>

<script>
const ctx = document.getElementById('myChart');

//Extracting SQL data passed by render context argument, injected by above script tag
const dataElement = document.getElementById('my-data');
console.log(JSON.parse(dataElement.textContent))
const myData = JSON.parse(dataElement.textContent);

console.log(myData.graph1_labels);

//Setup to allow programmatic changing of charts
var i = 1;
var chartLabels = "graph_labels" + i;
var  chartData = "graph_data" + i;
  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: myData[chartLabels],
      datasets: [{
        label: 'Number of published books',
        data: myData[chartData],
        borderWidth: 1
      }]
    },
    options: {
      scales: {
        y: {
          beginAtZero: true
        }
      }
    }
  });

</script>




</script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</html>